{"version":3,"sources":["Game.ts"],"names":[],"mappings":";;;;AAAA,oBAAoB;AACpB,iFAAiF;AACjF,yFAAyF;AACzF,mBAAmB;AACnB,2FAA2F;AAC3F,mGAAmG;AACnG,8BAA8B;AAC9B,2FAA2F;AAC3F,mGAAmG;;AAI7F,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAG1C;IAA0B,wBAAY;IADtC;QAAA,qEAuEC;QApEG,QAAQ;QAEA,gBAAU,GAAc,IAAI,CAAC;QAErC,gBAAgB;QAER,gBAAU,GAAY,IAAI,CAAC;QAEnC,QAAQ;QAED,gBAAU,GAAY,IAAI,CAAC;QAElC,SAAS;QAEF,gBAAU,GAAa,IAAI,CAAC;QAEnC,OAAO;QACC,cAAQ,GAAY,IAAI,CAAC;QACjC,KAAK;QACG,WAAK,GAAW,CAAC,CAAC;;QAgD1B,iBAAiB;IACrB,CAAC;IA/CG,MAAM;IACI,qBAAM,GAAhB;QACI,OAAO;QACP,IAAI,CAAC,aAAa,EAAE,CAAC;IACzB,CAAC;IAED,WAAW;IACJ,4BAAa,GAApB;QACI,eAAe;QACf,IAAI,OAAO,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC9C,eAAe;QACf,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QAC5B,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC;QAC7C,qBAAqB;QACrB,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC;IAC7C,CAAC;IAED,aAAa;IACN,+BAAgB,GAAvB;QACI,OAAO;QACP,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC;QACnC,IAAI,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;QACtC,OAAO;QACP,IAAI,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,GAAC,CAAC,CAAC;QAC3D,OAAO;QACP,IAAI,KAAK,GAAG,OAAO,GAAG,UAAU,GAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,UAAU,GAAG,EAAE,CAAC,UAAU,EAAE,CAAC;QACzG,IAAI,KAAK,GAAG,EAAE,CAAC,eAAe,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAC,CAAC,CAAC;QACrD,KAAK,IAAI,QAAQ,GAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAC,KAAK,CAAC,CAAC;QAC/C,OAAO,EAAE,CAAC,CAAC,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;IAC9B,CAAC;IAED,OAAO;IACA,wBAAS,GAAhB;QACI,IAAI,CAAC,KAAK,EAAG,CAAC;QACd,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,QAAQ,GAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;IAC7D,CAAC;IAED,wBAAwB;IAExB,eAAe;IAEf,oBAAK,GAAL;IAEA,CAAC;IA/DD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;4CACiB;IAIrC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;4CACiB;IAInC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;4CACgB;IAIlC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;4CACiB;IAhB1B,IAAI;QADhB,OAAO;OACK,IAAI,CAsEhB;IAAD,WAAC;CAtED,AAsEC,CAtEyB,EAAE,CAAC,SAAS,GAsErC;AAtEY,oBAAI","file":"","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { Player } from \"./Player\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport class Game extends cc.Component {\r\n\r\n    // 硬币 资源\r\n    @property(cc.Prefab)\r\n    private coinPerfab: cc.Prefab = null;\r\n\r\n    // 地面节点 用来设置硬币高度\r\n    @property(cc.Node)\r\n    private groundNode: cc.Node = null;\r\n\r\n    // 马里奥节点\r\n    @property(cc.Node)\r\n    public playerNode: cc.Node = null;\r\n\r\n    // 积分显示节点\r\n    @property(cc.Node)\r\n    public scoreLabel: cc.Label = null;\r\n\r\n    // 硬币节点\r\n    private coinNode: cc.Node = null;\r\n    // 积分\r\n    private score: number = 0;\r\n\r\n    // 初始化\r\n    protected onLoad() {\r\n        // 创建硬币\r\n        this.createNewCoin();\r\n    }\r\n\r\n    // 生成一个新的硬币\r\n    public createNewCoin() {\r\n        // 使用perfab创造节点\r\n        let newCoin = cc.instantiate(this.coinPerfab);\r\n        // 添加到Canvas节点下\r\n        this.node.addChild(newCoin);\r\n        this.coinNode = newCoin;\r\n        newCoin.setPosition(this.createNewCoinPos());\r\n        // 将 Game 组件的实例传入星星组件\r\n        newCoin.getComponent('Coin').game = this;\r\n    }\r\n\r\n    // 硬币随机生成一个坐标\r\n    public createNewCoinPos() {\r\n        // 硬币长宽\r\n        let coinWith = this.coinNode.width;\r\n        let coinHeight = this.coinNode.height;\r\n        // 地面高度\r\n        let groundY = this.groundNode.y + this.groundNode.height/2;\r\n        // 生成坐标\r\n        let coinY = groundY + coinHeight/2 + this.playerNode.getComponent('Player').jumpHeight * cc.random0To1();\r\n        let coinX = cc.randomMinus1To1() * this.node.width/2;\r\n        coinX += coinWith/2 * -(Math.abs(coinX)/coinX);\r\n        return cc.p(coinX, coinY);\r\n    }\r\n\r\n    // 增加积分\r\n    public gainScore() {\r\n        this.score ++;\r\n        this.scoreLabel.string = 'Score:' +  this.score.toString;\r\n    }\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}