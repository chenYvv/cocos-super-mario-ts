{"version":3,"sources":["Coin.ts"],"names":[],"mappings":";;;;AAAA,oBAAoB;AACpB,iFAAiF;AACjF,yFAAyF;AACzF,mBAAmB;AACnB,2FAA2F;AAC3F,mGAAmG;AACnG,8BAA8B;AAC9B,2FAA2F;AAC3F,mGAAmG;;AAI7F,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAG1C;IAA0B,wBAAY;IADtC;QAAA,qEAiDC;QA9CG,gCAAgC;QAExB,eAAS,GAAW,CAAC,CAAC;QACtB,UAAI,GAAS,IAAI,CAAC;;IA2C9B,CAAC;IAzCU,mBAAI,GAAX,UAAY,IAAI;QACZ,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACrB,CAAC;IAGD,gBAAgB;IACT,gCAAiB,GAAxB;QACI,IAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC;QACnD,OAAO,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;IACvD,CAAC;IAED,QAAQ;IACD,wBAAS,GAAhB;QACI,eAAe;QACf,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC;QAC1B,OAAO;QACP,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;QACtB,WAAW;QACX,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;IACxB,CAAC;IAGD,wBAAwB;IAExB,eAAe;IAEf,aAAa;IAEb,IAAI;IAEJ,qBAAM,GAAN,UAAQ,EAAE;QACN,YAAY;QACZ,IAAI,IAAI,CAAC,iBAAiB,EAAE,GAAG,IAAI,CAAC,SAAS,EAAE;YAC3C,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,OAAO;SACV;QACD,sBAAsB;QACtB,IAAI,cAAc,GAAG,EAAE,CAAC;QACxB,IAAI,gBAAgB,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC;QAC9D,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,cAAc,CAAC,GAAC,gBAAgB,CAAC,CAAC;IAClF,CAAC;IA3CD;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;2CACS;IAJrB,IAAI;QADhB,OAAO;OACK,IAAI,CAgDhB;IAAD,WAAC;CAhDD,AAgDC,CAhDyB,EAAE,CAAC,SAAS,GAgDrC;AAhDY,oBAAI","file":"","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { Game } from \"./Game\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport class Coin extends cc.Component {\r\n\r\n    // 马里奥 得到 硬币的距离，达到这个距离算得到，重新生成硬币\r\n    @property(cc.Integer)\r\n    private pickRaius: number = 0;\r\n    private game: Game = null;\r\n\r\n    public init(game) {\r\n        this.game = game;\r\n    }\r\n\r\n    \r\n    // 获得硬币和马里奥字间的距离\r\n    public getPlayerDistance (){\r\n        let playerpos = this.game.playerNode.getPosition();\r\n        return cc.pDistance(this.node.position, playerpos);\r\n    }\r\n\r\n    // 获得硬币时\r\n    public onGetCoin() {\r\n        // 创建新 硬币prefab\r\n        this.game.createNewCoin();\r\n        // 增加积分\r\n        this.game.gainScore();\r\n        // 销毁当前硬币节点\r\n        this.node.destroy();\r\n    }\r\n\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    // start () {\r\n\r\n    // }\r\n\r\n    update (dt) {\r\n        // 如果小于距离就获取\r\n        if (this.getPlayerDistance() < this.pickRaius) {\r\n            this.onGetCoin();\r\n            return;\r\n        }\r\n        // 按照计时器和最大时间 比例来减少透明度\r\n        let coinMinOpacity = 50;\r\n        let coinOpacityRatio = this.game.timer/this.game.coinDuration;\r\n        this.node.opacity = 255 - Math.floor((255 - coinMinOpacity)*coinOpacityRatio);\r\n    }\r\n}\r\n"]}