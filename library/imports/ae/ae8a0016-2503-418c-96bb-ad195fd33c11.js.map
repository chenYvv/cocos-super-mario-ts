{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\Player.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport class Player extends cc.Component {\r\n    // 跳跃高度\r\n    @property(cc.Integer)\r\n    private jumpHeight: number = 0;\r\n\r\n    // 跳跃一次的时间\r\n    @property(cc.Integer)\r\n    private jumpDuration: number = 0;\r\n\r\n    // 加速度\r\n    @property(cc.Integer)\r\n    private accel: number = 0;\r\n\r\n    // 最大速度\r\n    @property(cc.Integer)\r\n    private maxSpeed: number = 0;\r\n\r\n    private xSpeed: number = 0;\r\n    private accLeft: boolean = false;\r\n    private accRight: boolean = false;\r\n\r\n    // 跳跃动作\r\n    private setJumpAction() {\r\n        // 上升\r\n        let jumpUp = cc.moveBy(this.jumpDuration, cc.p(0, this.jumpHeight)).easing(cc.easeCubicActionOut());\r\n        // 下降\r\n        let jumpDown = cc.moveBy(this.jumpDuration, cc.p(0, -this.jumpHeight)).easing(cc.easeCubicActionIn());\r\n        \r\n        return cc.repeatForever(cc.sequence(jumpUp, jumpDown));\r\n    }\r\n\r\n    // 初始化\r\n    protected onLoad() {\r\n        // 使用重复跳跃\r\n        this.node.runAction(this.setJumpAction());\r\n\r\n        // 初始化输入监听\r\n        this.addEventListeners();\r\n\r\n        // 初始化加速度方向\r\n        this.accLeft = false;\r\n        this.accRight = false;\r\n\r\n        // 初始化速度\r\n        this.xSpeed = 0;\r\n    }\r\n\r\n    // 按键监听\r\n    private addEventListeners() {\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        cc.find('Canvas').on(cc.Node.EventType.TOUCH_START, this.onScreenTouchStart, this);\r\n        cc.find('Canvas').on(cc.Node.EventType.TOUCH_END, this.onScreenTouchEnd, this);\r\n        cc.find('Canvas').on(cc.Node.EventType.TOUCH_CANCEL, this.onScreenTouchEnd, this);\r\n    }\r\n\r\n    // 向左\r\n    private moveLeft () {\r\n        this.accLeft = true;\r\n        this.accRight = false;\r\n        this.node.scaleX = -1;\r\n    }\r\n    \r\n    // 向右\r\n    private moveRight () {\r\n        this.accLeft = false;\r\n        this.accRight = true;\r\n        this.node.scaleX = 1;\r\n    }\r\n\r\n    // 停止左右\r\n    private stopMove () {\r\n        this.accLeft = false;\r\n        this.accRight = false;\r\n    }\r\n\r\n    // 键盘-按下\r\n    private onKeyDown(event) {\r\n        switch (event.keyCode) {\r\n            case cc.KEY.a:\r\n            case cc.KEY.left:\r\n                this.moveLeft();\r\n                break;\r\n            case cc.KEY.d:\r\n            case cc.KEY.right:\r\n                this.moveRight();\r\n                break;\r\n        }\r\n    }\r\n\r\n    // 键盘-弹起\r\n    private onKeyUp(event) {\r\n        switch (event.keyCode) {\r\n            case cc.KEY.a:\r\n            case cc.KEY.left:\r\n                this.stopMove();\r\n                break;\r\n            case cc.KEY.d:\r\n            case cc.KEY.right:\r\n                this.stopMove();\r\n                break;\r\n        }\r\n    }\r\n\r\n    // 屏幕-按下\r\n    private onScreenTouchStart(event: cc.Event.EventTouch) {\r\n        if ( event.getLocationX() > cc.winSize.width/2 ){\r\n            this.moveRight();\r\n        }else{\r\n            this.moveLeft();\r\n        }\r\n    }\r\n\r\n    // 屏幕-抬起\r\n    private onScreenTouchEnd(event: cc.Event.EventTouch) {\r\n        this.stopMove();\r\n    }\r\n\r\n    protected update(dt) {\r\n        // 更新速度\r\n        if(this.accRight){\r\n            this.xSpeed += this.accel * dt;\r\n        }else if(this.accLeft){\r\n            this.xSpeed -= this.accel * dt;\r\n        }\r\n\r\n        // 最大速度限制\r\n        if( Math.abs(this.xSpeed) > this.maxSpeed ) {\r\n            this.xSpeed = this.maxSpeed * (this.xSpeed/Math.abs(this.xSpeed));\r\n        }\r\n        // 更新位置x\r\n        this.node.x += this.xSpeed * dt;\r\n        \r\n        // 限制超出屏幕\r\n        if( Math.abs(this.node.x) > (this.node.parent.width/2 - this.node.width/2) ){\r\n            // 速度归零\r\n            this.xSpeed = 0;\r\n            this.node.x = (this.node.parent.width/2 - this.node.width/2) * (this.node.x/Math.abs(this.node.x))\r\n        }\r\n        \r\n    }\r\n\r\n}\r\n"]}